# 局域网签到系统

## Motivation

当前签到系统使用的是二维码签到，尽管二维码是动态的，但实质作用并不大，首先手速快的同学进行快速拍照发送扫码(*如果有机会可以测试一下*)，而且开启高画质的实时视频基本能百分百让签到失去意义。

## Solution

### 基于WIFI Fingerprint的局域网签到系统

### ~~ping all hosts in LAN~~

通过ping或者类似的方式[stackoverflow](https://stackoverflow.com/questions/4023222/list-of-all-hosts-on-lan-network)，我们能得到同一局域网下所有主机的IP地址，那么基于此IP地址，也能进一步实现通信

- server get all hosts in LAN
- server 轮询访问合法IP的指定端口进行签到

### ~~mDNS~~
一种可能的解决方案是在签到的同时收集签到者的地理信息，但这种地理信息是可以通过技术手段伪造的，因此，我们巧妙地联系到mDNS协议想要来开发一种签到系统，提高同学们的到课率。

mDNS主要实现了在没有传统DNS服务器的情况下使局域网内的主机实现相互发现和通信.
每个进入局域网的主机，如果开启了mDNS服务的话，都会向局域网内的所有主机组播一个消息，我是谁（域名），和我的IP地址是多少。然后其他有mDNS服务的主机就会响应，也会告诉你，它是谁（域名），它的IP地址是多少.
同时也可以注册服务，声明自己提供某种服务，以便在clients需要某种服务时，查找到对应的server的IP地址。

- 教师端注册服务“check in”
- 学生端查找服务并得到IP地址进行通信
- 通信可以采用TCP，UDP，可以适当多收集信息，包括但不限于个人学号，MAC地址(防止一部手机登录2个账号)

## 目前困难

1. 考虑到签到系统需要有足够的平台支持度，在目前至少需要对安卓和IOS的支持，如果不想到合适的办法，可能需要开发Client，Server两端的共计4种版本

   实际开发可能需要想办法尽量保证可移植性，目前的想法：
   - ~~使用微信小程序~~ （某个版本后，IOS限制了微信小程序对mdns协议的调用）
   - 使用JAVA, 然后交叉编译为objective-C (IOS不支持JAVA，支持swift和objective-C)
   - 开发为Web APP （不太确定web app是否有对应权限）

如果使用非mDNS方案，可能微信小程序或Web APP都是比java更好的方法，具有更高的跨平台支持度

## 后续可能的进行

1. 通过jaacount授权自动获取学生信息.
2. ~~如果能做进交我办，成为一个功能比较合适，专门为签到做一个app感觉有点杀鸡用牛刀~~
3. 开发其它功能，包括但不限于局域网共享资料，发送随堂测试等
